<script type="text/javascript">
function get_input_count(){var t=0;return $(".sgsc-form-area [data-sgsc-count]").each(function(){var e=parseInt($(this).attr("data-sgsc-count"),10);t<e&&(t=e)}),t+1}$(document).ready(function(){$('.sgsc-sidebar-item[draggable="true"]').attr("draggable","true"),$(".sgsc-sidebar-item").on("dragstart",function(e){var t=$(this).attr("sgsc-element-name"),a=$(this).attr("element-icon"),n=$(this).closest("[sgsc-drag-item-type]").attr("sgsc-drag-item-type"),n=JSON.stringify({sgscElementName:t,icon:a,item_type:n});e.originalEvent.dataTransfer.setData("text/plain",n)}),$(".sgsc-form-area").on("dragover",function(e){e.preventDefault(),$(this).addClass("drag-over")}).on("dragleave",function(e){$(this).removeClass("drag-over")}),$(".sgsc-form-area").on("drop",function(e){e.preventDefault(),$(this).removeClass("drag-over");var t=e.originalEvent.dataTransfer.getData("text/plain"),a=JSON.parse(t),n=a.sgscElementName,t=a.icon;if("results"==a.item_type)return alert("This item can only be inserted in results area."),0;a=get_input_count();if(4<$(".sgsc-form-area [data-sgsc-count]").length)return alert_sgsc_msg("inputs"),0;$('[data-element-template="1"]').find("[data-sgsc-element-type]").attr("class",""),$('[data-element-template="1"]').find("[data-sgsc-element-type]").addClass(t),$('[data-element-template="1"]').find("[data-sgsc-element-type]").text(n),$('[data-element-template="1"]').find("[data-sgsc-count]").text("{input_"+a+"}"),$('[data-element-template="1"]').find("[data-sgsc-count]").attr("data-sgsc-count",a),$('[data-element-template="1"]').find("[euid]").attr("euid","input_"+a),$('[data-element-template="1"]').find("[e-id]").attr("e-id","input_"+a),$('[data-element-template="1"]').find("[e-type]").attr("e-type",n),$('[data-element-template="1"]').find("[desc-id]").attr("desc-id","input_"+a),$('[data-element-template="1"]').find("[d-id]").attr("d-id","input_"+a);a=$('[data-element-template="1"]').html();$('[data-element-template="1"]').find("[euid]").attr("euid","***");var s=a,r=e.originalEvent.clientY,i=!1;$(".sgsc-dropped-item",this).each(function(){var e=$(this).offset().top+$(this).outerHeight();if(r<e)return $(this).before(s),!(i=!0)}),i||$(this).append(s),$(".sgsc-form-area .placeholder-div").remove(),format_seperator_inputs()})}),$(document).ready(function(){$(".sgsc-form-area").sortable({items:".sgsc-dropped-item[sgsc-item='movable']",placeholder:"sortable-placeholder",cursor:"move",containment:"parent",tolerance:"pointer",update:function(e,t){console.log("updated"),save_sgsc_config()}}).disableSelection()});
</script>