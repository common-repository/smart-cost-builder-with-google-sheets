<script type="text/javascript">
function sgsc_ajax_url(){
  return "<?php echo admin_url('admin-ajax.php'); ?>";
}
</script>

<script type="text/javascript">
function sgsc_save_input(s){var a=$(s).closest("[sgsc-popup]").attr("input-id"),c=$(s).closest("[sgsc-popup]").attr("sgsc-popup"),o=sgsc_configs(c);console.log(o);var n=0;if($(s).closest("[sgsc-popup]").find("[sgsc-comp]").each(function(s,c){var t=$(this).attr("sgsc-comp"),e=$(this).val();if($(this).prop("required")&&""==e)return!(n=1);o.hasOwnProperty(t)&&(o[t]=e),sgsc_calc_config[a]=o}),"1"==n)return $(s).closest("[sgsc-popup]").find(".config-error").show(),$('[euid="'+a+'"] [data-alert]').attr("data-alert",1),0;$(s).closest("[sgsc-popup]").find(".config-error").hide(),$('[euid="'+a+'"] [data-alert]').attr("data-alert",0),console.log(sgsc_calc_config),save_sgsc_config()}function sgsc_save_result(s){var a=$(s).closest("[sgsc-popup]").attr("input-id"),c=$(s).closest("[sgsc-popup]").attr("sgsc-popup"),o=sgsc_configs(c);console.log(o),$(s).closest("[sgsc-popup]").find("[sgsc-comp]").each(function(s,c){var t=$(this).attr("sgsc-comp"),e=$(this).val();o.hasOwnProperty(t)&&(o[t]=e),sgsc_calc_config[a]=o}),save_sgsc_config()}function sgsc_set_defaults(s,c){var e=sgsc_calc_config;if(Object.keys(e).length<=0)return console.log("Data is empty."),0;if(!(c in e))return $('[sgsc-popup="'+s+'"]').find("[sgsc-comp]").filter(':input:not([exclude-reset="1"]), select:not([exclude-reset="1"])').val(""),console.log("Unable to retrive data for:",c),0;e=e[c];$('[sgsc-popup="'+s+'"]').find("[sgsc-comp]").each(function(s,c){var t=$(this).attr("sgsc-comp");$('[sgsc-comp="'+t+'"]').is("select")&&void 0===e[t]||$('[sgsc-comp="'+t+'"]').val(e[t])}),$('[sgsc-popup="'+s+'"]').find("[dynamic-option]").trigger("change")}function get_sequences(){var e=[],a=[];$(".sgsc-form-area [desc-id]").each(function(s,c){var t=$(this).attr("desc-id");e.push(t)}),$(".sgsc-result-area [desc-id]").each(function(s,c){var t=$(this).attr("desc-id");a.push(t)});var s={inputs:e,results:a};return console.log(s),JSON.stringify(s)}function get_calc_config(){var a={"calc-id":sgsc_calc_details()[0],"sheet-id":sgsc_calc_details()[3],"calc-title":sgsc_calc_details()[1]};return $("#calc-appearance-settings-form [data-name]").each(function(s,c){var t=$(this).attr("data-name"),e=$(this).attr("data-v");a[t]=e}),console.log(a),a}function save_sgsc_config(){var s=JSON.stringify(sgsc_calc_config),s={action:"save_sgsc_config",calc_id:sgsc_calc_details()[0],json_config:s,json_sequence:get_sequences(),json_appearance:JSON.stringify(get_calc_config()),html_config:$('[sgsc-calculator-html="1"]').html()};console.log("saving..."),$.ajax({url:sgsc_ajax_url(),type:"POST",data:s,cache:!1}).done(function(s){console.log("saved!"),$(".sgsc-popup-overlay").hide()})}$(document).on("click",'[sgsc-delete="1"]',function(){var s;confirm("Are you sure, you want to delete?")&&(s=$(this).attr("d-id"),$(this).closest('[sgsc-item="movable"]').remove(),delete sgsc_calc_config[s],save_sgsc_config())}),$(document).on("click",'[action="save-calc"]',function(){save_sgsc_config()}),$(document).on("change","#calc-appearance-settings-form [data-name]",function(){save_sgsc_config()}),$(document).on("change","#calc-name",function(){update_sgsc_Settings([sgsc_calc_details()[0],sgsc_calc_details()[1],"","","",""]),save_sgsc_config()});
</script>